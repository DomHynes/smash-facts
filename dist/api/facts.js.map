{"version":3,"sources":["../../src/api/facts.js"],"names":["id","index","req","res","find","_id","populate","name","characters","exec","then","json","facts"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;kBAEe;AAAA,QAAM,wCAAS;;AAE7B;AACAA,MAAK,MAHwB;;AAK7B;;;AAGAC,OAR6B,iBAQtBC,GARsB,EAQjBC,GARiB,EAQX;AACjB,mBAAMC,IAAN,CAAW,EAAX,EAAe,EAACC,KAAK,CAAN,EAAf,EACCC,QADD,CACU,cADV,EAC0B,EAACC,MAAM,CAAP,EAAUF,KAAK,CAAf,EAD1B,EAECC,QAFD,CAEU,OAFV,EAEmB,EAACD,KAAK,CAAN,EAASG,YAAY,CAArB,EAFnB,EAGCF,QAHD,CAGU,YAHV,EAGwB,EAACD,KAAK,CAAN,EAHxB,EAICI,IAJD,GAKEC,IALF,CAKQ,iBAAS;AACfP,QAAIQ,IAAJ,CAAS,EAAEC,YAAF,EAAT;AACA,IAPF;AAQA;AAjB4B,EAAT,CAAN;AAAA,C","file":"facts.js","sourcesContent":["import resource from 'resource-router-middleware';\r\nimport facts from '../models/facts';\r\n\r\nexport default () => resource({\r\n\r\n\t/** Property name to store preloaded entity on `request`. */\r\n\tid : 'fact',\r\n\r\n\t/** For requests with an `id`, you can auto-load the entity.\r\n\t *  Errors terminate the request, success sets `req[id] = data`.\r\n\t */\r\n\tindex( req, res ) {\r\n\t\tfacts.find({}, {_id: 0})\r\n\t\t.populate('submitted_by', {name: 1, _id: 0})\r\n\t\t.populate('games', {_id: 0, characters: 0})\r\n\t\t.populate('characters', {_id: 0})\r\n\t\t.exec()\r\n\t\t\t.then( facts => {\r\n\t\t\t\tres.json({ facts });\r\n\t\t\t})\r\n\t}\r\n});\r\n"]}