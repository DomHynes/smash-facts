{"version":3,"sources":["../../../src/web/controllers/facts.js"],"names":["router","get","req","res","find","err","result","render","title","games","Promise","all","exec","then","values","chars","post","json","body"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;AACA;;;;;;kBAEe,YAAM;AACnB,MAAMA,SAAS,sBAAf;;AAEAA,SAAOC,GAAP,CAAW,GAAX,EAAgB,UAAEC,GAAF,EAAOC,GAAP,EAAgB;AAC9B,oBAAMC,IAAN,CAAW,EAAX,EAAe,UAAEC,GAAF,EAAOC,MAAP,EAAkB;AAC/BH,UAAII,MAAJ,CAAW,aAAX,EAA0B,EAAEC,OAAO,OAAT,EAAkBC,OAAOH,MAAzB,EAA1B;AACD,KAFD;AAGD,GAJD;;AAMAN,SAAOC,GAAP,CAAW,MAAX,EAAmB,UAAEC,GAAF,EAAMC,GAAN,EAAe;AAChCO,YAAQC,GAAR,CAAY,CACV,gBAAMP,IAAN,CAAW,EAAX,EAAeQ,IAAf,EADU,EAEV,qBAAWR,IAAX,CAAgB,EAAhB,EAAoBQ,IAApB,EAFU,CAAZ,EAIGC,IAJH,CAIS,kBAAU;AACfV,UAAII,MAAJ,CAAW,WAAX,EAAwB,EAACC,OAAO,UAAR,EAAoBC,OAAOK,OAAO,CAAP,CAA3B,EAAsCC,OAAOD,OAAO,CAAP,CAA7C,EAAxB;AACD,KANH;AAOD,GARD;;AAUAd,SAAOgB,IAAP,CAAY,MAAZ,EAAoB,UAAEd,GAAF,EAAOC,GAAP,EAAgB;AAClCA,QAAIc,IAAJ,CAAS,EAACf,KAAKA,IAAIgB,IAAV,EAAT;AACD,GAFD;;AAIA,SAAOlB,MAAP;AACD,C","file":"facts.js","sourcesContent":["import { Router } from 'express';\r\nimport facts from '../../models/facts';\r\nimport games from '../../models/games';\r\nimport characters from '../../models/characters';\r\n\r\nexport default () => {\r\n  const router = Router();\r\n\r\n  router.get('/', ( req, res ) => {\r\n    facts.find({}, ( err, result) => {\r\n      res.render('games/index', { title: 'Facts', games: result});\r\n    })\r\n  });\r\n\r\n  router.get('/new', ( req,res ) => {\r\n    Promise.all([\r\n      games.find({}).exec(),\r\n      characters.find({}).exec()\r\n    ])\r\n      .then( values => {\r\n        res.render('facts/new', {title: 'new Fact', games: values[0], chars: values[1] })\r\n      })\r\n  });\r\n\r\n  router.post('/new', ( req, res ) => {\r\n    res.json({req: req.body })\r\n  });\r\n\r\n  return router;\r\n}\r\n"]}